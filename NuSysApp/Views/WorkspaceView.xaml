<Page
x:Class="NuSysApp.WorkspaceView" 
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
     xmlns:local="using:NuSysApp" 
     xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
          mc:Ignorable="d" PointerPressed="Page_PointerPressed" DoubleTapped="Page_DoubleTapped"
    ManipulationDelta="Page_ManipulationDelta" ManipulationStarting="Page_ManipulationStarting"
    ManipulationInertiaStarting="Page_ManipulationInertiaStarting">

    <Page.TopAppBar>
        <AppBar x:Name="TopToolbar" Background="#FF15C3F2" Visibility="Visible" ClosedDisplayMode="Minimal">
            <StackPanel Opacity=".5" Orientation="Horizontal" Background="White">
                <AppBarButton Click="AppBarButton_Click_Save"  Label="Save" Icon="Save" Background="White"></AppBarButton>
                <AppBarButton Click="AppBarButton_Click_Erase" Label="Erase" Background="White"></AppBarButton>
                <AppBarButton Click="AddButtonClick" Label="Upload" Icon="Upload" Background="White"></AppBarButton>
                <AppBarButton Click="AppBarButton_Click_Document"  Label="Document" Icon="Document" Background="White"></AppBarButton>
                <AppBarButton Click="AppBarButton_Click_OFile" Label="Open File" Icon="OpenFile" Background="White"></AppBarButton>
                <AppBarButton Click="AppBarButton_Click_AFriend" Label="Add Friend" Icon="AddFriend" Background="White"></AppBarButton>
                <AppBarButton Click="AppBarButton_Click_Undo" Label="Undo" Icon="Undo" Background="White"></AppBarButton>
                <AppBarButton Click="AppBarButton_Click_Redo" Label="Redo" Icon="Redo" Background="White"></AppBarButton>
                <AppBarButton Click="AppBarButton_Click_Scribble" Label="Scribble" Background="White">
                    <AppBarButton.Icon>
                        <BitmapIcon UriSource="pics/scribble icon.png"/>
                    </AppBarButton.Icon>
                </AppBarButton>
                <AppBarButton Label="Text" Icon="Font" Background="White" Click="AppBarButton_Click_Text"></AppBarButton>
                <AppBarButton Label="Pictures" Icon="Pictures" Background="White" Click="AppBarButton_Click_Pictures"></AppBarButton>
                <AppBarButton Label="Links" Background="White">
                    <AppBarButton.Flyout>
                        <MenuFlyout Placement="Bottom">
                            <MenuFlyoutItem Text="Bezier Link" Click="MenuFlyoutItem_Click_Bezier"></MenuFlyoutItem>
                            <MenuFlyoutItem Text="LineRepresentation Link" Click="MenuFlyoutItem_Click_Line"></MenuFlyoutItem>
                            <MenuFlyout.MenuFlyoutPresenterStyle>
                                <Style x:Name="DropdownLink" TargetType="MenuFlyoutPresenter">
                                    <Setter Property="Background" Value="White" />
                                    <Setter Property="BorderBrush" Value="LightBlue" />
                                    <Setter Property="BorderThickness" Value="1" />
                                    <Setter Property="Margin" Value="0,32,0,0" />
                                </Style>
                            </MenuFlyout.MenuFlyoutPresenterStyle>
                        </MenuFlyout>
                    </AppBarButton.Flyout>
                </AppBarButton>
                <AppBarButton Label="Global Ink" Background="White" Click="AppBarButton_Click">

                    <AppBarButton.Icon>
                        <BitmapIcon UriSource="pics/ink icon.png"/>
                    </AppBarButton.Icon>
                    <AppBarButton.Flyout>
                        <MenuFlyout Placement="Bottom">
                            <MenuFlyoutItem Text="test1"></MenuFlyoutItem>
                            <MenuFlyoutSubItem Text="test1sub">
                                <MenuFlyoutItem Text="test1sub"></MenuFlyoutItem>
                            </MenuFlyoutSubItem>
                            <MenuFlyoutSeparator Background="LightBlue"></MenuFlyoutSeparator>
                            <MenuFlyoutItem Text="test2"></MenuFlyoutItem>
                            <MenuFlyoutItem Text="test3"></MenuFlyoutItem>
                            <MenuFlyoutItem Text="test4"></MenuFlyoutItem>
                            <MenuFlyout.MenuFlyoutPresenterStyle>
                                <Style x:Name="Dropdown" TargetType="MenuFlyoutPresenter">
                                    <Setter Property="Background" Value="White" />
                                    <Setter Property="BorderBrush" Value="LightBlue" />
                                    <Setter Property="BorderThickness" Value="1" />
                                    <Setter Property="Margin" Value="0,32,0,0" />
                                </Style>
                            </MenuFlyout.MenuFlyoutPresenterStyle>
                        </MenuFlyout>
                    </AppBarButton.Flyout>
                </AppBarButton>
                <AppBarButton Label="Search" Background="White">
                    <AppBarButton.Icon>
                        <BitmapIcon UriSource="pics/search icon.png"/>
                    </AppBarButton.Icon>
                </AppBarButton>
            </StackPanel>
        </AppBar>
    </Page.TopAppBar>
    <Page.BottomAppBar>
        <AppBar x:Name="BottomToolbar" Background="#FF15C3F2" ClosedDisplayMode="Minimal">
            <StackPanel Opacity=".5" Orientation="Horizontal" Background="White">
                <AppBarButton Label="Save" Icon="Save" Background="White" Click="AppBarButton_Click_Save"></AppBarButton>
                <AppBarButton Label="Upload" Icon="Upload" Background="White" Click="AddButtonClick"></AppBarButton>
                <AppBarButton Label="Document" Icon="Document" Background="White" Click="AppBarButton_Click_Document"></AppBarButton>
                <AppBarButton Label="Open File" Icon="OpenFile" Background="White" Click="AppBarButton_Click_OFile"></AppBarButton>
                <AppBarButton Label="Add Friend" Icon="AddFriend" Background="White" Click="AppBarButton_Click_AFriend"></AppBarButton>
                <AppBarButton Label="Undo" Icon="Undo" Background="White" Click="AppBarButton_Click_Undo"></AppBarButton>
                <AppBarButton Label="Redo" Icon="Redo" Background="White" Click="AppBarButton_Click_Redo"></AppBarButton>
                <AppBarButton Label="Scribble"  Background="White" Click="AppBarButton_Click_Scribble">
                    <AppBarButton.Icon>
                        <BitmapIcon UriSource="pics/scribble icon.png"/>
                    </AppBarButton.Icon>
                    
                </AppBarButton>
                <AppBarButton Label="Text" Icon="Font" Background="White" Click="AppBarButton_Click"></AppBarButton>
                <AppBarButton Label="Pictures" Icon="Pictures" Background="White" Click="AppBarButton_Click_Pictures"></AppBarButton>
                <AppBarButton Label="Global Ink" Background="White" Click="AppBarButton_Click">
                    <AppBarButton.Icon>
                        <BitmapIcon UriSource="pics/ink icon.png"/>
                    </AppBarButton.Icon>
                </AppBarButton>
                <AppBarButton Label="Search" Background="White">
                    <AppBarButton.Icon>
                        <BitmapIcon UriSource="pics/search icon.png"/>
                    </AppBarButton.Icon>
                </AppBarButton>
            </StackPanel>
        </AppBar>
    </Page.BottomAppBar>

    <Grid x:Name="maingrid" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" ManipulationMode="All">
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="0*"/>
        </Grid.RowDefinitions>
        <!--<Grid x:Name="lefttoolbar" HorizontalAlignment="Left" Margin="0,0,0,0" Width="50">
            <StackPanel x:Name="stackpanel" Background="#FF15C3F2" Opacity="0.5" Width="50" HorizontalAlignment="Left"></StackPanel>
            <Rectangle Fill="#FF15C3F2" HorizontalAlignment="Right" Margin="0,278,-10,278" Width="5" Opacity="0.5" 
                       RadiusY="5.25" RadiusX="5.25" />
            <Grid.Transitions>
                <TransitionCollection>
                    <EdgeUIThemeTransition Edge="Left"></EdgeUIThemeTransition>
                </TransitionCollection>
            </Grid.Transitions>
        </Grid>-->
        <ItemsControl Name="IC" ItemsSource="{Binding AtomViewList}">
            <ItemsControl.RenderTransform>
                <TransformGroup>
                    <TranslateTransform X="{Binding TransformX}" Y="{Binding TransformY}"/>
                    <ScaleTransform />
                </TransformGroup>
            </ItemsControl.RenderTransform>
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas x:Name="canvas"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
        
        <InkCanvas IsRightTapEnabled="True" RightTapped="inkCanvas_RightTapped" Name="inkCanvas">
            
            <InkCanvas.RenderTransform>
                <TransformGroup>
                    <TranslateTransform X="{Binding TransformX}" Y="{Binding TransformY}"/>
                    <ScaleTransform />
                </TransformGroup>
            </InkCanvas.RenderTransform>
        </InkCanvas>
    </Grid>
</Page>

